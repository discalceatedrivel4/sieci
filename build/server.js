!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=6)}([function(e,n,t){"use strict";function r(e){f.MongoClient.connect(d,function(n,t){if(n)console.error(n);else{t.collection("wse").find({date:{$gte:e}}).toArray(function(e,n){if(e)console.error(e);else{if(console.log("Result:"),console.log(n),!n.length||0===n.length)throw"No data";for(var r=0,o=n;r<o.length;r++){var i=o[r];u("src/data/dump/"+i.date+".txt",i.data)}}t.close()})}})}function o(e,n){return new Promise(function(t,r){var o=[];f.MongoClient.connect(d,function(i,s){if(i)console.error(i);else{s.collection("wse").findOne({date:n},function(n,i){if(n)console.error(n),r();else{if(console.log("Result:"),!i.data)throw"No data";for(var a=0,u=i.data;a<u.length;a++){var c=u[a];-1!==c.indexOf("T2,"+e)&&o.push(c)}}s.close(),t(o)})}})})}function i(e){return new Promise(function(n,t){l.readdir(e,function(e,r){e?t(e):n(r)})})}function s(e,n){for(var t=[],r=0,o=e;r<o.length;r++){var i=o[r];-1!==i.indexOf("T2,"+n)&&t.push(i)}return t}function a(e){return new Promise(function(n,t){l.readFile(e,"utf8",function(e,r){e?t(e):n(r.split("\n"))})})}function u(e,n){for(var t=l.createWriteStream(e,{flags:"a"}),r=0,o=n;r<o.length;r++){var i=o[r];t.write(i+"\n")}}function c(e){var n=[],t=Number(e[0].split(",")[5]),r=e[0].split(",")[2],o=e[e.length-1].split(",")[2];if("090000"!==r||o<"170000")return n;for(var i=0,s=e;i<s.length;i++){var a=s[i],u=a.split(","),c=Number(u[5]),l=u[2];"090000"!==l&&l<"170000"&&n.push({value:(c-t)/t*100*100,volume:Number(u[6]),time:l})}return n}Object.defineProperty(n,"__esModule",{value:!0});var l=t(7),f=t(8),d=process.env.MONGO_URL||"";n.getAllDataFromMongoSince=r,n.getStringDataFromMongo=o,n.readFilenamesInDirectory=i,n.chooseDataOfStock=s,n.getStringDataFromFile=a,n.saveDataToFile=u,n.transformData=c},function(e,n){e.exports=require("child_process")},function(e,n){e.exports=require("express")},function(e,n){e.exports=require("http")},function(e,n){e.exports=require("path")},function(e,n){e.exports=require("uws")},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=t(2),i=t(3),s=t(4),a=t(5),u=t(0),c=o();c.use("/",o.static(s.join(__dirname,"client"))),c.get("/*",function(e,n){return n.sendFile(s.join(__dirname,"client","index.html"))});var l=i.createServer(c),f=new a.Server({server:l}),d=process.env.PORT||"8080";l.listen(d,function(){return console.log((new Date).toString().split(" ")[4]+" - Server is listening on port "+l.address().port)});var g,p=[],v=[];u.readFilenamesInDirectory("build/data").then(function(e){for(var n=0,t=e;n<t.length;n++){var r=t[n];!function(e){u.getStringDataFromFile("build/data/"+e).then(function(e){return u.transformData(e)}).then(function(n){if(0!==n.length){var t="PZU - "+e;p.push({desc:t,data:n}),v.push(t)}})}(r)}});var h=!1,m=r.fork("build/ml.js");m.on("message",function(e){g=e,console.log("Data received from worker"),f.broadcast(e)}),m.on("exit",function(){return console.log("Process got killed")}),f.on("connection",function(e){e.send(JSON.stringify({running:h})),0!==v.length&&e.send(JSON.stringify(v)),void 0!==g&&e.send(g),e.on("message",function(n){switch(n.substring(0,2)){case"ST":m.send(JSON.stringify({config:n.substring(2),inputData:p})),h=!0,e.send(JSON.stringify({running:h}));break;case"SP":process.exit(1),m.kill(),h=!1,setTimeout(function(){return e.send(JSON.stringify({running:h}))},100);break;case"DA":for(var t=n.substring(2),r=0,o=p;r<o.length;r++){var i=o[r];if(i.desc===t){e.send(JSON.stringify(i));break}}}})})},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("mongodb")}]);